import"../chunks/DsnmJJEf.js";import{o as Ee,a as Ae,b as Ne,s as ce}from"../chunks/Dxb3O7qE.js";import{M as oe,z as Te,F as te,A as O,Y as Me,B as De,g as n,a8 as ke,C as Ie,H as Le,D as de,G as re,O as K,Z as Se,a9 as Ce,aa as He,I as Re,N as fe,Q as Oe,m as Ue,ab as ve,ac as me,ad as $e,ae as Pe,J as he,L as Be,af as Ye,ag as ze,ah as se,_ as Fe,ai as Ge,aj as Ve,ak as We,K as qe,al as Ke,am as Je,an as Qe,ao as Xe,p as Ze,l as je,s as E,f as F,b as ea,a as L,a2 as ne,e as z,h as aa,ap as J,aq as Q,c as A,r as y,n as ta}from"../chunks/DAUzGMuf.js";import{i as ie}from"../chunks/BO8m66Ra.js";import{s as X,c as ra}from"../chunks/Dov9qEEr.js";import{d as sa,e as na}from"../chunks/yxq_GR_A.js";import{s as ia,a as la}from"../chunks/CSupyUe9.js";import{s as oa,b as fa,c as pe,g as ua}from"../chunks/Bv8yLjnu.js";function ca(e,a){return a}function da(e,a,t){for(var p=[],u=a.length,o=0;o<u;o++)Ge(a[o].e,p,!0);Ve(p,()=>{var s=p.length===0&&t!==null;if(s){var r=t,c=r.parentNode;We(c),c.append(r),e.items.clear(),M(e,a[0].prev,a[u-1].next)}for(var f=0;f<u;f++){var i=a[f];s||(e.items.delete(i.k),M(e,i.prev,i.next)),qe(i.e,!s)}e.first===a[0]&&(e.first=a[0].prev)})}function va(e,a,t,p,u,o=null){var s=e,r=new Map,c=null;{var f=e;s=O?te(Me(f)):f.appendChild(oe())}O&&De();var i=null,d=ke(()=>{var g=t();return $e(g)?g:g==null?[]:me(g)}),h,_=!0;function l(){pa(U,h,s,a,p),i!==null&&(h.length===0?(i.fragment?(s.before(i.fragment),i.fragment=null):he(i.effect),w.first=i.effect):Be(i.effect,()=>{i=null}))}var w=Te(()=>{h=n(d);var g=h.length;let b=!1;if(O){var C=Ie(s)===Le;C!==(g===0)&&(s=de(),te(s),re(!1),b=!0)}for(var S=new Set,N=Re,D=null,k=Oe(),T=0;T<g;T+=1){O&&K.nodeType===Se&&K.data===Ce&&(s=K,b=!0,re(!1));var H=h[T],$=p(H,T),x=_?null:r.get($);x?(He(x.v,H),x.i=T,k&&N.skipped_effects.delete(x.e)):(x=_a(_?s:null,D,H,$,T,u,a,t),_&&(x.o=!0,D===null?c=x:D.next=x,D=x),r.set($,x)),S.add($)}if(g===0&&o&&!i)if(_)i={fragment:null,effect:fe(()=>o(s))};else{var P=document.createDocumentFragment(),B=oe();P.append(B),i={fragment:P,effect:fe(()=>o(B))}}if(O&&g>0&&te(de()),!_)if(k){for(const[Y,G]of r)S.has(Y)||N.skipped_effects.add(G.e);N.oncommit(l),N.ondiscard(()=>{})}else l();b&&re(!0),n(d)}),U={effect:w,items:r,first:c};_=!1,O&&(s=K)}function pa(e,a,t,p,u){var o=a.length,s=e.items,r=e.first,c,f=null,i=[],d=[],h,_,l,w;for(w=0;w<o;w+=1){if(h=a[w],_=u(h,w),l=s.get(_),e.first??=l,!l.o){l.o=!0;var U=f?f.next:r;M(e,f,l),M(e,l,U),le(l,U,t),f=l,i=[],d=[],r=f.next;continue}if((l.e.f&se)!==0&&he(l.e),l!==r){if(c!==void 0&&c.has(l)){if(i.length<d.length){var g=d[0],b;f=g.prev;var C=i[0],S=i[i.length-1];for(b=0;b<i.length;b+=1)le(i[b],g,t);for(b=0;b<d.length;b+=1)c.delete(d[b]);M(e,C.prev,S.next),M(e,f,C),M(e,S,g),r=g,f=S,w-=1,i=[],d=[]}else c.delete(l),le(l,r,t),M(e,l.prev,l.next),M(e,l,f===null?e.first:f.next),M(e,f,l),f=l;continue}for(i=[],d=[];r!==null&&r.k!==_;)(r.e.f&se)===0&&(c??=new Set).add(r),d.push(r),r=r.next;if(r===null)continue;l=r}i.push(l),f=l,r=l.next}if(r!==null||c!==void 0){for(var N=c===void 0?[]:me(c);r!==null;)(r.e.f&se)===0&&N.push(r),r=r.next;var D=N.length;if(D>0){var k=o===0?t:null;da(e,N,k)}}}function _a(e,a,t,p,u,o,s,r){var c=(s&Ye)!==0,f=(s&ze)===0,i=c?f?Ue(t,!1,!1):ve(t):t,d=(s&Pe)===0?u:ve(u),h={i:d,v:i,k:p,a:null,e:null,o:!1,prev:a,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=oe())}return h.e=fe(()=>o(e,i,d,r)),a!==null&&(a.next=h),h}finally{}}function le(e,a,t){for(var p=e.next?e.next.e.nodes_start:t,u=a?a.e.nodes_start:t,o=e.e.nodes_start;o!==null&&o!==p;){var s=Fe(o);u.before(o),o=s}}function M(e,a,t){a===null?(e.first=t,e.effect.first=t&&t.e):(a.e.next&&(a.e.next.prev=null),a.next=t,a.e.next=t&&t.e),t===null?e.effect.last=a&&a.e:(t.e.prev&&(t.e.prev.next=null),t.prev=a,t.e.prev=a&&a.e)}const ga=Symbol("is custom element"),ma=Symbol("is html");function _e(e,a,t,p){var u=ha(e);O&&(u[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||u[a]!==(u[a]=t)&&(a==="loading"&&(e[Ke]=t),t==null?e.removeAttribute(a):typeof t!="string"&&ba(e).includes(a)?e[a]=t:e.setAttribute(a,t))}function ha(e){return e.__attributes??={[ga]:e.nodeName.includes("-"),[ma]:e.namespaceURI===Je}}var ge=new Map;function ba(e){var a=e.getAttribute("is")||e.nodeName,t=ge.get(a);if(t)return t;ge.set(a,t=[]);for(var p,u=e,o=Element.prototype;o!==u;){p=Xe(u);for(var s in p)p[s].set&&t.push(s);u=Qe(u)}return t}const xa=()=>{const e=oa;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},ya={subscribe(e){return xa().page.subscribe(e)}};var wa=F('<span class="dirty-badge">未保存の変更があります</span>'),Ea=F("<li><a> </a></li>"),Aa=F('<p class="mt-3 text-xs text-slate-400">移動先: <code class="text-cyan-300"> </code></p>'),Na=F('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4"><div class="w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900 p-6 shadow-2xl"><h2 class="text-lg font-semibold">未保存の変更があります</h2> <p class="mt-2 text-sm text-slate-300">このページから移動すると、保存されていない変更が失われます。本当に遷移してもよろしいですか？</p> <!> <div class="mt-6 flex justify-end gap-3"><button type="button" class="rounded-full border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800">キャンセル</button> <button type="button" class="rounded-full bg-cyan-500 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-cyan-400">移動する</button></div></div></div>'),Ta=F('<div class="min-h-screen bg-slate-950 text-slate-100" role="application"><header class="site-header" data-ignore-dirty=""><div class="logo-group"><a href="/" class="logo">Reservoir Play</a> <!></div> <button type="button" aria-label="Toggle menu"><span></span> <span></span> <span></span></button> <ul></ul></header> <main><!></main></div> <!>',1);function Ra(e,a){Ze(a,!0);const t=()=>la(ya,"$page",p),[p,u]=ia();let o=J(!1),s=J(null),r=J(!1),c=J(!1);const f=[{href:"/",label:"Home"},{href:"/guide",label:"Guide"},{href:"/tutorial",label:"Tutorial"},{href:"/demo1",label:"Demo 1"},{href:"/demo2",label:"Demo 2"},{href:"/demo3",label:"Demo 3"}],i=Q(()=>t().url.pathname),d=Q(()=>n(i).replace(/\/index\.html$/,"/")),h=Q(()=>n(d)==="/"||n(d)===pe||n(d)===`${pe}/`),_=Q(()=>n(d).startsWith("/demo1")||n(d).startsWith("/demo2"));fa(v=>{n(_)&&n(r)&&!v.willUnload&&(v.cancel(),E(o,!0),E(s,v.to?.url.pathname,!0))});function l(v){n(_)&&n(r)&&(v.preventDefault(),v.returnValue="")}Ee(()=>{typeof window<"u"&&window.addEventListener("beforeunload",l)}),Ae(()=>{typeof window<"u"&&window.removeEventListener("beforeunload",l)});function w(){E(o,!1),E(s,null)}function U(){n(s)&&(E(o,!1),E(r,!1),typeof window<"u"&&window.removeEventListener("beforeunload",l),ua(n(s)),E(s,null))}function g(){n(r)||(E(r,!0),console.log("未保存の変更あり: edited = true"))}function b(v){if(!n(_))return;const m=v?.target;!m||typeof m.closest!="function"||m.closest("[data-ignore-dirty]")||!m.closest('button, [role="button"], input[type="button"], input[type="submit"], input[type="reset"], [data-dirty-trigger]')||g()}function C(v){return v==="/"?n(d)==="/":n(d).startsWith(v)}je(()=>{!n(_)&&n(r)&&E(r,!1)});function S(){E(c,!n(c))}function N(){E(c,!1)}var D=Ta(),k=ea(D),T=A(k),H=A(T),$=L(A(H),2);{var x=v=>{var m=wa();z(v,m)};ie($,v=>{n(r)&&n(_)&&v(x)})}y(H);var P=L(H,2);let B;P.__click=S;var Y=L(P,2);let G;va(Y,21,()=>f,ca,(v,m)=>{var R=Ea(),I=A(R);I.__click=N;let V;var W=A(I,!0);y(I),y(R),ne((q,j)=>{_e(I,"href",n(m).href),_e(I,"aria-current",q),V=X(I,1,"",null,V,j),ce(W,n(m).label)},[()=>C(n(m).href)?"page":void 0,()=>({active:C(n(m).href)})]),z(v,R)}),y(Y),y(T);var Z=L(T,2),be=A(Z);Ne(be,()=>a.children??ta),y(Z),y(k);var xe=L(k,2);{var ye=v=>{var m=Na(),R=A(m),I=L(A(R),4);{var V=ee=>{var ae=Aa(),ue=L(A(ae)),we=A(ue,!0);y(ue),y(ae),ne(()=>ce(we,n(s))),z(ee,ae)};ie(I,ee=>{n(s)&&ee(V)})}var W=L(I,2),q=A(W);q.__click=w;var j=L(q,2);j.__click=U,y(W),y(R),y(m),z(v,m)};ie(xe,v=>{n(o)&&v(ye)})}ne(()=>{B=X(P,1,"hamburger",null,B,{active:n(c)}),G=X(Y,1,"nav-links",null,G,{active:n(c)}),X(Z,1,ra(n(h)?"landing-main":"mx-auto flex w-full max-w-[1100px] flex-col gap-6 px-6 py-8 page-main"))}),na("click",k,b,!0),z(e,D),aa(),u()}sa(["click"]);export{Ra as component};
