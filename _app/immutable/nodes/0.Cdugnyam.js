import"../chunks/DsnmJJEf.js";import{o as we,a as Ee,b as Ae,s as ue}from"../chunks/Dxb3O7qE.js";import{M as le,z as Ne,F as ee,A as H,Y as Te,B as Me,g as i,a8 as De,C as ke,H as Ie,D as ce,G as ae,O as K,Z as Le,a9 as Se,aa as Ce,I as He,N as oe,Q as Re,m as Oe,ab as de,ac as ge,ad as Ue,ae as $e,J as me,L as Be,af as Pe,ag as Ye,ah as te,_ as Fe,ai as Ge,aj as Ve,ak as We,K as qe,al as ze,am as Ke,an as Je,ao as Qe,p as Xe,l as Ze,s as N,f as G,b as je,a as I,a2 as re,e as F,h as ea,ap as J,aq as se,c as T,r as y,n as aa}from"../chunks/DAUzGMuf.js";import{i as ne}from"../chunks/BO8m66Ra.js";import{s as Q,c as ta}from"../chunks/Dov9qEEr.js";import{d as ra,e as sa}from"../chunks/yxq_GR_A.js";import{s as na,a as ia}from"../chunks/CSupyUe9.js";import{s as la,b as oa,c as ve,g as fa}from"../chunks/Cgw3cbSb.js";function ua(e,a){return a}function ca(e,a,t){for(var v=[],u=a.length,o=0;o<u;o++)Ge(a[o].e,v,!0);Ve(v,()=>{var n=v.length===0&&t!==null;if(n){var r=t,c=r.parentNode;We(c),c.append(r),e.items.clear(),D(e,a[0].prev,a[u-1].next)}for(var f=0;f<u;f++){var s=a[f];n||(e.items.delete(s.k),D(e,s.prev,s.next)),qe(s.e,!n)}e.first===a[0]&&(e.first=a[0].prev)})}function da(e,a,t,v,u,o=null){var n=e,r=new Map,c=null;{var f=e;n=H?ee(Te(f)):f.appendChild(le())}H&&Me();var s=null,_=De(()=>{var m=t();return Ue(m)?m:m==null?[]:ge(m)}),p,g=!0;function l(){va(R,p,n,a,v),s!==null&&(p.length===0?(s.fragment?(n.before(s.fragment),s.fragment=null):me(s.effect),w.first=s.effect):Be(s.effect,()=>{s=null}))}var w=Ne(()=>{p=i(_);var m=p.length;let h=!1;if(H){var O=ke(n)===Ie;O!==(m===0)&&(n=ce(),ee(n),ae(!1),h=!0)}for(var L=new Set,E=He,A=null,S=Re(),M=0;M<m;M+=1){H&&K.nodeType===Le&&K.data===Se&&(n=K,h=!0,ae(!1));var B=p[M],U=v(B,M),x=g?null:r.get(U);x?(Ce(x.v,B),x.i=M,S&&E.skipped_effects.delete(x.e)):(x=pa(g?n:null,A,B,U,M,u,a,t),g&&(x.o=!0,A===null?c=x:A.next=x,A=x),r.set(U,x)),L.add(U)}if(m===0&&o&&!s)if(g)s={fragment:null,effect:oe(()=>o(n))};else{var P=document.createDocumentFragment(),$=le();P.append($),s={fragment:P,effect:oe(()=>o($))}}if(H&&m>0&&ee(ce()),!g)if(S){for(const[V,Y]of r)L.has(V)||E.skipped_effects.add(Y.e);E.oncommit(l),E.ondiscard(()=>{})}else l();h&&ae(!0),i(_)}),R={effect:w,items:r,first:c};g=!1,H&&(n=K)}function va(e,a,t,v,u){var o=a.length,n=e.items,r=e.first,c,f=null,s=[],_=[],p,g,l,w;for(w=0;w<o;w+=1){if(p=a[w],g=u(p,w),l=n.get(g),e.first??=l,!l.o){l.o=!0;var R=f?f.next:r;D(e,f,l),D(e,l,R),ie(l,R,t),f=l,s=[],_=[],r=f.next;continue}if((l.e.f&te)!==0&&me(l.e),l!==r){if(c!==void 0&&c.has(l)){if(s.length<_.length){var m=_[0],h;f=m.prev;var O=s[0],L=s[s.length-1];for(h=0;h<s.length;h+=1)ie(s[h],m,t);for(h=0;h<_.length;h+=1)c.delete(_[h]);D(e,O.prev,L.next),D(e,f,O),D(e,L,m),r=m,f=L,w-=1,s=[],_=[]}else c.delete(l),ie(l,r,t),D(e,l.prev,l.next),D(e,l,f===null?e.first:f.next),D(e,f,l),f=l;continue}for(s=[],_=[];r!==null&&r.k!==g;)(r.e.f&te)===0&&(c??=new Set).add(r),_.push(r),r=r.next;if(r===null)continue;l=r}s.push(l),f=l,r=l.next}if(r!==null||c!==void 0){for(var E=c===void 0?[]:ge(c);r!==null;)(r.e.f&te)===0&&E.push(r),r=r.next;var A=E.length;if(A>0){var S=o===0?t:null;ca(e,E,S)}}}function pa(e,a,t,v,u,o,n,r){var c=(n&Pe)!==0,f=(n&Ye)===0,s=c?f?Oe(t,!1,!1):de(t):t,_=(n&$e)===0?u:de(u),p={i:_,v:s,k:v,a:null,e:null,o:!1,prev:a,next:null};try{if(e===null){var g=document.createDocumentFragment();g.append(e=le())}return p.e=oe(()=>o(e,s,_,r)),a!==null&&(a.next=p),p}finally{}}function ie(e,a,t){for(var v=e.next?e.next.e.nodes_start:t,u=a?a.e.nodes_start:t,o=e.e.nodes_start;o!==null&&o!==v;){var n=Fe(o);u.before(o),o=n}}function D(e,a,t){a===null?(e.first=t,e.effect.first=t&&t.e):(a.e.next&&(a.e.next.prev=null),a.next=t,a.e.next=t&&t.e),t===null?e.effect.last=a&&a.e:(t.e.prev&&(t.e.prev.next=null),t.prev=a,t.e.prev=a&&a.e)}const _a=Symbol("is custom element"),ga=Symbol("is html");function pe(e,a,t,v){var u=ma(e);H&&(u[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||u[a]!==(u[a]=t)&&(a==="loading"&&(e[ze]=t),t==null?e.removeAttribute(a):typeof t!="string"&&ha(e).includes(a)?e[a]=t:e.setAttribute(a,t))}function ma(e){return e.__attributes??={[_a]:e.nodeName.includes("-"),[ga]:e.namespaceURI===Ke}}var _e=new Map;function ha(e){var a=e.getAttribute("is")||e.nodeName,t=_e.get(a);if(t)return t;_e.set(a,t=[]);for(var v,u=e,o=Element.prototype;o!==u;){v=Qe(u);for(var n in v)v[n].set&&t.push(n);u=Je(u)}return t}const ba=()=>{const e=la;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},xa={subscribe(e){return ba().page.subscribe(e)}};var ya=G('<span class="dirty-badge">未保存の変更があります</span>'),wa=G("<li><a> </a></li>"),Ea=G('<p class="mt-3 text-xs text-slate-400">移動先: <code class="text-cyan-300"> </code></p>'),Aa=G('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4"><div class="w-full max-w-md rounded-2xl border border-slate-800 bg-slate-900 p-6 shadow-2xl"><h2 class="text-lg font-semibold">未保存の変更があります</h2> <p class="mt-2 text-sm text-slate-300">このページから移動すると、保存されていない変更が失われます。本当に遷移してもよろしいですか？</p> <!> <div class="mt-6 flex justify-end gap-3"><button type="button" class="rounded-full border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800">キャンセル</button> <button type="button" class="rounded-full bg-cyan-500 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-cyan-400">移動する</button></div></div></div>'),Na=G('<div class="min-h-screen bg-slate-950 text-slate-100" role="application"><header class="site-header" data-ignore-dirty=""><div class="logo-group"><a href="/" class="logo">Reservoir Play</a> <!></div> <button type="button" aria-label="Toggle menu"><span></span> <span></span> <span></span></button> <ul></ul></header> <main><!></main></div> <!>',1);function Ha(e,a){Xe(a,!0);const t=()=>ia(xa,"$page",v),[v,u]=na();let o=J(!1),n=J(null),r=J(!1),c=J(!1);const f=[{href:"/",label:"Home"},{href:"/guide",label:"Guide"},{href:"/tutorial",label:"Tutorial"},{href:"/demo1",label:"Demo 1"},{href:"/demo2",label:"Demo 2"},{href:"/demo3",label:"Demo 3"}],s=se(()=>t().url.pathname),_=se(()=>i(s)==="/"||i(s)===ve||i(s)===`${ve}/`),p=se(()=>i(s).startsWith("/demo1")||i(s).startsWith("/demo2"));oa(d=>{i(p)&&i(r)&&!d.willUnload&&(d.cancel(),N(o,!0),N(n,d.to?.url.pathname,!0))});function g(d){i(p)&&i(r)&&(d.preventDefault(),d.returnValue="")}we(()=>{typeof window<"u"&&window.addEventListener("beforeunload",g)}),Ee(()=>{typeof window<"u"&&window.removeEventListener("beforeunload",g)});function l(){N(o,!1),N(n,null)}function w(){i(n)&&(N(o,!1),N(r,!1),typeof window<"u"&&window.removeEventListener("beforeunload",g),fa(i(n)),N(n,null))}function R(){i(r)||(N(r,!0),console.log("未保存の変更あり: edited = true"))}function m(d){if(!i(p))return;const b=d?.target;!b||typeof b.closest!="function"||b.closest("[data-ignore-dirty]")||!b.closest('button, [role="button"], input[type="button"], input[type="submit"], input[type="reset"], [data-dirty-trigger]')||R()}function h(d){return d==="/"?i(s)==="/":i(s).startsWith(d)}Ze(()=>{!i(p)&&i(r)&&N(r,!1)});function O(){N(c,!i(c))}function L(){N(c,!1)}var E=Na(),A=je(E),S=T(A),M=T(S),B=I(T(M),2);{var U=d=>{var b=ya();F(d,b)};ne(B,d=>{i(r)&&i(p)&&d(U)})}y(M);var x=I(M,2);let P;x.__click=O;var $=I(x,2);let V;da($,21,()=>f,ua,(d,b)=>{var C=wa(),k=T(C);k.__click=L;let W;var q=T(k,!0);y(k),y(C),re((z,X)=>{pe(k,"href",i(b).href),pe(k,"aria-current",z),W=Q(k,1,"",null,W,X),ue(q,i(b).label)},[()=>h(i(b).href)?"page":void 0,()=>({active:h(i(b).href)})]),F(d,C)}),y($),y(S);var Y=I(S,2),he=T(Y);Ae(he,()=>a.children??aa),y(Y),y(A);var be=I(A,2);{var xe=d=>{var b=Aa(),C=T(b),k=I(T(C),4);{var W=Z=>{var j=Ea(),fe=I(T(j)),ye=T(fe,!0);y(fe),y(j),re(()=>ue(ye,i(n))),F(Z,j)};ne(k,Z=>{i(n)&&Z(W)})}var q=I(k,2),z=T(q);z.__click=l;var X=I(z,2);X.__click=w,y(q),y(C),y(b),F(d,b)};ne(be,d=>{i(o)&&d(xe)})}re(()=>{P=Q(x,1,"hamburger",null,P,{active:i(c)}),V=Q($,1,"nav-links",null,V,{active:i(c)}),Q(Y,1,ta(i(_)?"landing-main":"mx-auto flex w-full max-w-[1100px] flex-col gap-6 px-6 py-8 page-main"))}),sa("click",A,m,!0),F(e,E),ea(),u()}ra(["click"]);export{Ha as component};
